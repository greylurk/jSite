plugins {
    id 'application'
    id 'java'
    id 'jacoco'
}

group = 'net.pterodactylus'
version = '0.14'

repositories {
    mavenCentral()
    maven { url "https://maven.pterodactylus.net/" }
}

dependencies {
    implementation('net.pterodactylus:utils:0.13')
    testImplementation('junit:junit:4.12')
    testImplementation('org.hamcrest:hamcrest-library:1.3')
    testImplementation('org.mockito:mockito-core:1.10.19')
}

java { 
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
}

application { 
    mainClass = 'de.todesbaum.jsite.main.Main'
}

task fatJar(type: Jar) {
    archiveBaseName = "${project.name}-fat"
    from {
        configurations.runtimeClasspath.collect {
            it.isDirectory() ? it : zipTree(it)
        } 
    }
    manifest {
        attributes('Main-Class': 'de.todesbaum.jsite.main.Main')
    }
    with jar
}


jacoco {
    toolVersion = '0.8.8'
}
jacocoTestReport.dependsOn test

compileJava.options.encoding = 'UTF-8'
compileTestJava.options.encoding = 'UTF-8'
